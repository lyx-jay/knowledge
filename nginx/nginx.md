基础概念
1. 正向代理：对客户端/浏览器的代理。客户端想要隐藏自己的ip地址，所以先去访问代理服务器，由代理服务器去访问目标服务器。多个客户端可以指向一个代理服务器。
2. 反向代理：对服务器的代理。客户端访问目标服务器，实际上访问的是代理服务器，再由代理访问真正的服务器。一个代理服务器可以指向多个服务器。
## location 匹配规则

1. `[=]`：精确匹配，必须完全相同才可以匹配上。
2. `[~]`：正则匹配，区分大小写
3. `[~*]`：正则匹配，不区分大小写
4. `[^~]`：特殊匹配符。如果 location 中带有该符号，就会采用该规则，不会再进行正则匹配。在很多文章中会把`[^~]`称作前缀匹配，但同时又会把没有任何修饰符的规则也称为前缀匹配。这样就会就会出现误导。
5. location 匹配顺序：
	1. 首先先检查使用前缀字符定义的location，选择最长匹配的项并记录下来。
	2. 如果找到了精确匹配的location，也就是使用了`=`修饰符的location，结束查找，使用它的配置。
	3. 然后按顺序查找使用正则定义的location，如果匹配则停止查找，使用它定义的配置。
	4. 如果没有匹配的正则location，则使用前面记录的最长匹配前缀字符location。

##  Proxy 反向代理

反向代理（Reverse Proxy)：以代理服务器来接受来自客户端（用户）的请求，再将请求转发给内部网络上的服务器，并将请求得到的数据从内部服务器返回给用户

### 相关规则

1. `proxy_pass $url`：该指令用于将请求转发给真正的目标服务器。其中，url表示服务器的地址。
2. `proxy_set_header X_Real_IP $_addr`：该指令用于将客户端真实的 IP 地址传递给后端服务器。当 `Nginx` 作为反向代理服务器时，它会接收到客户端的请求，然后将请求转发给后端服务器。在这个过程中，`Nginx` 会创建一个新的 `HTTP` 请求，作为与后端服务器的通信。默认情况下，Nginx 会将自己的IP地址作为请求头中的 `X-Real-IP` 字段的值。

```bash
location / {
	proxy_set_header X-Real-IP $remote_addr
}
```

